<% if local_assigns[:datatable] %>
  <div class="csv-preview panel panel-default" data-url="<%= main_app.export_file_path(file_set.id)%>">
    <a name="csv-preview-panel-<%= file_set.id %>"></a>
    <div class="panel-heading" data-toggle="collapse" data-target="#csv-preview-<%= file_set.id %>">
      <h4 class="panel-title">
        <a class="csv-preview-title accordion-toggle">Preview: <%= file_set.link_name %></a>
      </h4>
    </div>
    <div id="csv-preview-<%= file_set.id %>" class="panel-collapse collapse in">
      <div class="panel-body overflow-scroll">
        <div class="csv-preview-error" style="display: none;">There was an error generating the CSV preview; please download the file instead.</div>
        <table class="csv-preview-datatable display full-width" style="width:100%"></table>
      </div>
      <div class="panel-footer csv-preview-size" style="display: none;">
        <!-- size -->
      </div>
    </div>
  </div>
<% else %>
  <div>
    <a data-turbolinks="false" href="#csv-preview-panel-<%= file_set.id %>">Preview</a>
  </div>
  <% if Hyrax.config.display_media_download_link? %>
    <div>
      <%= link_to t('hyrax.file_set.show.download'), hyrax.download_path(file_set.id), id: "file_download_"+file_set.id, data: { label: file_set.id }, target: "_new" %>
    </div>
  <% end %>
<% end %>
